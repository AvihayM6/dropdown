{"ast":null,"code":"import _slicedToArray from\"/Users/avihaymaman/Desktop/dropdown/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import axios from'axios';import'../style/Summary.css';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Summary=function Summary(_ref){var products=_ref.products;var baseUrl='https://front-end-exam-dot-winky-apis.ew.r.appspot.com/';var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filteredProducts=_useState2[0],setFilteredProducts=_useState2[1];var updateApiProducts=function updateApiProducts(){/* TODO: run in FOR_EACH */filteredProducts.forEach(function(product){var data=[{id:product.id,amount:product.userQuantity}];axios.post(\"\".concat(baseUrl,\"products/\"),data).then(function(res){if(res.status>=200&&res.status<=300){toast.success(res.data.message,{position:\"bottom-left\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});}}).catch(function(error){toast.error(error,{position:\"bottom-left\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});});});};var errorMessage=function errorMessage(){toast.error('The cart is empty, please fill it.',{position:\"bottom-left\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined,theme:\"light\"});};useEffect(function(){setFilteredProducts(products.filter(function(product){return product.userQuantity!==undefined&&product.userQuantity>0;}));},[products]);return/*#__PURE__*/_jsxs(\"div\",{className:\"summary-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"items-list\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"title\",children:\"Item list:\"}),filteredProducts.length>0?filteredProducts.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"product-summary\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsx(\"div\",{className:\"seprator\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-quantity\",children:[product.userQuantity,\"KG\"]})]},product.id);}):/*#__PURE__*/_jsx(\"p\",{className:\"empty-cart\",children:\"No products added yet\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"total-price\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"title\",children:\"Total price:\"}),\"$\",filteredProducts.reduce(function(acc,product){return acc+(product.totalPrice||0);},0)]}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-button\",onClick:filteredProducts.length>0?updateApiProducts:errorMessage,children:\"Submit\"}),/*#__PURE__*/_jsx(ToastContainer,{position:\"bottom-left\",autoClose:5000,hideProgressBar:false,newestOnTop:false,closeOnClick:true,rtl:false,pauseOnFocusLoss:true,draggable:true,pauseOnHover:true,theme:\"light\"})]});};","map":{"version":3,"names":["useEffect","useState","axios","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","Summary","_ref","products","baseUrl","_useState","_useState2","_slicedToArray","filteredProducts","setFilteredProducts","updateApiProducts","forEach","product","data","id","amount","userQuantity","post","concat","then","res","status","success","message","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","catch","error","errorMessage","filter","className","children","length","map","name","reduce","acc","totalPrice","onClick","newestOnTop","rtl","pauseOnFocusLoss"],"sources":["/Users/avihaymaman/Desktop/dropdown/src/components/Summary.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport '../style/Summary.css'\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n\ntype Product = {\n  id: string\n  name?: string\n  color?: string\n  price?: number\n  stock?: number\n  totalPrice?: number\n  userQuantity?: number\n}\n\ntype SummaryProps = {\n  products: Product[]\n}\n\nexport const Summary = ({products}: SummaryProps) => {\n  const baseUrl = 'https://front-end-exam-dot-winky-apis.ew.r.appspot.com/'\n  const [filteredProducts,setFilteredProducts] = useState<Product[]>([])\n  const updateApiProducts = () => {\n    /* TODO: run in FOR_EACH */\n    filteredProducts.forEach((product) => {\n      const data = [{\n        id: product.id,\n        amount: product.userQuantity,\n      }]\n      axios.post(\n        `${baseUrl}products/`, data\n      )\n      .then((res) => {\n        if(res.status >= 200 && res.status <= 300) {\n          toast.success(res.data.message, {\n            position: \"bottom-left\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n            theme: \"light\",\n          })\n        }\n      })\n      .catch(function (error) {\n        toast.error(error, {\n          position: \"bottom-left\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n          progress: undefined,\n          theme: \"light\",\n        })\n      })\n    })\n  }\n  const errorMessage = () => {\n    toast.error('The cart is empty, please fill it.', {\n      position: \"bottom-left\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n      theme: \"light\",\n    })\n  }\n\n  useEffect(() => {\n    setFilteredProducts(products.filter((product:Product) => {\n        return product.userQuantity !== undefined && product.userQuantity > 0\n    }))\n  },[products])\n\n  return (\n    <div className='summary-container'>\n      <div className=\"items-list\">\n        <label className='title'>Item list:</label>\n        {\n        filteredProducts.length > 0 ?\n            filteredProducts.map((product:Product) => {\n                return <div key={product.id}\n                            className='product-summary'>\n                        <div className='product-name'>{product.name}</div>\n                        <div className='seprator'></div>\n                        <div className='user-quantity'>{product.userQuantity}KG</div>\n                    </div>\n            }) :\n            <p className=\"empty-cart\">No products added yet</p>\n        }\n      </div>\n      <div className=\"total-price\">\n        <label className='title'>Total price:</label>\n        ${filteredProducts.reduce((acc, product:Product) => {\n          return acc+(product.totalPrice || 0)\n        }, 0)}\n      </div>\n      <div className=\"submit-button\"\n            onClick={filteredProducts.length >0 ? updateApiProducts : errorMessage}>\n        Submit\n      </div>\n      <ToastContainer\n        position=\"bottom-left\"\n        autoClose={5000}\n        hideProgressBar={false}\n        newestOnTop={false}\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        draggable\n        pauseOnHover\n        theme=\"light\"\n      />\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}