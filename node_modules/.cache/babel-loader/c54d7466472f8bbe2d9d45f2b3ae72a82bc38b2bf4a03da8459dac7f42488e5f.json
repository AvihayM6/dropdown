{"ast":null,"code":"import _objectSpread from\"/Users/avihaymaman/Desktop/dropdown/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/avihaymaman/Desktop/dropdown/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/avihaymaman/Desktop/dropdown/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/avihaymaman/Desktop/dropdown/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import axios from'axios';import'../style/Card.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Card=function Card(_ref){var _product$stock$toStri,_product$stock;var productId=_ref.productId,closeCard=_ref.closeCard,updateProduct=_ref.updateProduct;var mock=[{id:'apple',name:'Apple',color:'red',price:2,stock:10},{id:'carrot',name:'Carrot',color:'orange',price:4,stock:30},{id:'melone',name:'Melone',color:'orange',price:6,stock:10},{id:'pear',name:'Pear',color:'orange',price:2,stock:1},{id:'lemon',name:'Lemon',color:'yellow',price:6,stock:90},{id:'orange',name:'Orange',color:'orange',price:10,stock:0},{id:'salad',name:'Salad',color:'green',price:5,stock:20}];var baseUrl='https://front-end-exam-dot-winky-apis.ew.r.appspot.com/';var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),icon=_useState4[0],setIcon=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),hasQuantity=_useState6[0],setHasQuantity=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),quantity=_useState8[0],setQuantity=_useState8[1];useEffect(function(){axios.get(\"\".concat(baseUrl,\"products/\").concat(productId)).then(function(res){console.log(res);/* alert('The product was given successfully') */if(!product)setProduct(res.data);}).catch(function(error){console.log(error);});/* const findCorrectProductFromMock = mock.findIndex((mockProduct: Product) => {\n      return mockProduct.id === productId\n    })\n    if(!product) setProduct(mock[findCorrectProductFromMock]) */},[]);useEffect(function(){var importedIcon=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var iconPath;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return import(\"../images/\".concat(productId.toLowerCase(),\".svg\"));case 2:iconPath=_context.sent;setIcon(iconPath.default);return _context.abrupt(\"return\",iconPath);case 5:case\"end\":return _context.stop();}},_callee);}));return function importedIcon(){return _ref2.apply(this,arguments);};}();importedIcon();},[productId]);useEffect(function(){if((product===null||product===void 0?void 0:product.stock)===0)setHasQuantity(false);if(product)updateProduct(product);},[product]);var handleCloseCard=function handleCloseCard(){closeCard(product===null||product===void 0?void 0:product.id);};var handleQuantity=function handleQuantity(event){var value=event.target.value;setQuantity(value);var totalPrice=value*((product===null||product===void 0?void 0:product.price)||0);var updateStock=((product===null||product===void 0?void 0:product.stock)||0)-quantity;setProduct(_objectSpread(_objectSpread({},product),{},{stock:updateStock}));setProduct(_objectSpread(_objectSpread({},product),{},{userQuantity:value,totalPrice:totalPrice}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"card-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[product&&/*#__PURE__*/_jsxs(\"div\",{className:\"fruit\",style:{backgroundColor:(product===null||product===void 0?void 0:product.color)||''},children:[/*#__PURE__*/_jsx(\"img\",{src:icon,alt:\"product image\",className:\"card-img\"}),/*#__PURE__*/_jsx(\"label\",{className:\"product-title\",children:product===null||product===void 0?void 0:product.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"cancel-container\",onClick:handleCloseCard,children:/*#__PURE__*/_jsx(\"div\",{className:\"cancel-fruit\",children:\"x\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-header\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"quantity-label\",children:\"Selected quantity:\"}),product&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:hasQuantity?'quantity-number':'quantity-number zero-quantity',children:quantity}),\" KG\"]})]}),product&&/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:(_product$stock$toStri=product===null||product===void 0?void 0:(_product$stock=product.stock)===null||_product$stock===void 0?void 0:_product$stock.toString())!==null&&_product$stock$toStri!==void 0?_product$stock$toStri:0,defaultValue:\"0\",onChange:handleQuantity,className:\"slider\"})]}),product&&/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[\"Price: \",/*#__PURE__*/_jsxs(\"span\",{className:hasQuantity?'price-number':'price-number zero-quantity',children:[\"$\",quantity*((product===null||product===void 0?void 0:product.price)||0)]})]})]});};","map":{"version":3,"names":["useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Card","_ref","_product$stock$toStri","_product$stock","productId","closeCard","updateProduct","mock","id","name","color","price","stock","baseUrl","_useState","undefined","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","icon","setIcon","_useState5","_useState6","hasQuantity","setHasQuantity","_useState7","_useState8","quantity","setQuantity","get","concat","then","res","console","log","data","catch","error","importedIcon","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","iconPath","wrap","_callee$","_context","prev","next","toLowerCase","sent","default","abrupt","stop","apply","arguments","handleCloseCard","handleQuantity","event","value","target","totalPrice","updateStock","_objectSpread","userQuantity","className","children","style","backgroundColor","src","alt","onClick","type","min","max","toString","defaultValue","onChange"],"sources":["/Users/avihaymaman/Desktop/dropdown/src/components/Card.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport axios from 'axios'\nimport '../style/Card.css'\n\ntype Product = {\n  id?: string\n  name?: string\n  color?: string\n  price?: number\n  stock?: number\n  totalPrice?: number\n  userQuantity?: number\n}\n\ntype CardProps = {\n  productId: string\n  closeCard: Function\n  updateProduct: Function\n}\n\nexport const Card = ({productId, closeCard, updateProduct}: CardProps) => {\n  const mock = [\n    {\n      id: 'apple',\n      name: 'Apple',\n      color: 'red',\n      price: 2,\n      stock: 10,\n    },\n    {\n      id: 'carrot',\n      name: 'Carrot',\n      color: 'orange',\n      price: 4,\n      stock: 30,\n    },\n    {\n      id: 'melone',\n      name: 'Melone',\n      color: 'orange',\n      price: 6,\n      stock: 10,\n    },\n    {\n      id: 'pear',\n      name: 'Pear',\n      color: 'orange',\n      price: 2,\n      stock: 1,\n    },\n    {\n      id: 'lemon',\n      name: 'Lemon',\n      color: 'yellow',\n      price: 6,\n      stock: 90,\n    },\n    {\n      id: 'orange',\n      name: 'Orange',\n      color: 'orange',\n      price: 10,\n      stock: 0,\n    },\n    {\n      id: 'salad',\n      name: 'Salad',\n      color: 'green',\n      price: 5,\n      stock: 20,\n    },\n  ] as Product[]\n  const baseUrl = 'https://front-end-exam-dot-winky-apis.ew.r.appspot.com/'\n  const [product, setProduct] = useState<Product | undefined>(undefined)\n  const [icon, setIcon] = useState('')\n  const [hasQuantity, setHasQuantity] = useState(true)\n  const [quantity, setQuantity] = useState(0)\n\n  useEffect(() => {\n    axios.get(`${baseUrl}products/${productId}`)\n    .then((res) => {\n      console.log(res)\n      /* alert('The product was given successfully') */\n      if(!product) setProduct(res.data)\n    })\n    .catch(function (error) {\n      console.log(error)\n    })\n    /* const findCorrectProductFromMock = mock.findIndex((mockProduct: Product) => {\n      return mockProduct.id === productId\n    })\n    if(!product) setProduct(mock[findCorrectProductFromMock]) */\n  }, [])\n\n  useEffect(() => {\n    const importedIcon = async () => {\n      const iconPath = await import(`../images/${productId.toLowerCase()}.svg`)\n      setIcon(iconPath.default)\n      return iconPath\n    }\n    importedIcon()\n  }, [productId])\n\n  useEffect(() => {\n    if(product?.stock === 0) setHasQuantity(false)\n    if(product) updateProduct(product)\n  }, [product])\n\n  const handleCloseCard = () => {\n    closeCard(product?.id)\n  }\n\n  const handleQuantity = (event:any) => {\n    const value = event.target.value;\n    setQuantity(value)\n    const totalPrice = value * (product?.price || 0)\n    const updateStock = (product?.stock || 0)-quantity\n    setProduct({...product,\n      stock: updateStock,\n    })\n    setProduct({\n      ...product,\n      userQuantity: value,\n      totalPrice: totalPrice,\n    })\n  }\n\n  return (\n    <div className='card-container'>\n      <div className=\"header\">\n      {product && <div className=\"fruit\"\n             style={{backgroundColor: (product?.color || '')}}>\n          <img src={icon} \n               alt=\"product image\"\n               className='card-img'/>\n          <label className=\"product-title\">{product?.name}</label>\n        </div>\n      }\n\n        <div className=\"cancel-container\"\n        onClick={handleCloseCard}>\n          <div className=\"cancel-fruit\">\n            x\n          </div>\n        </div>\n      </div>\n      <div className=\"quantity\">\n        <div className=\"quantity-header\">\n          <label className='quantity-label'>Selected quantity:</label>\n          {product &&\n            <div>\n              <span className={hasQuantity? 'quantity-number' : 'quantity-number zero-quantity'}>{quantity}</span> KG\n            </div>\n          }\n        </div>\n        {product &&\n        <input type=\"range\"\n               min='0'\n               max={product?.stock?.toString() ?? 0}\n               defaultValue=\"0\"\n               onChange={handleQuantity}\n               className='slider'/>\n        }\n      </div>\n      {product &&\n      <div className=\"price\">\n        Price: <span className={hasQuantity? 'price-number' : 'price-number zero-quantity'}>${quantity*(product?.price || 0)}</span>\n      </div>\n}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}